(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{226:function(t,s,n){"use strict";n.r(s);var a=n(0),r=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#监控","aria-hidden":"true"}},[t._v("#")]),t._v(" 监控")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#server"}},[t._v("server")])]),n("li",[n("a",{attrs:{href:"#redis"}},[t._v("redis")])]),n("li",[n("a",{attrs:{href:"#数据存储"}},[t._v("数据存储")]),n("ul",[n("li",[n("a",{attrs:{href:"#表名说明"}},[t._v("表名说明")])]),n("li",[n("a",{attrs:{href:"#数据库表"}},[t._v("数据库表")])])])]),n("li",[n("a",{attrs:{href:"#指令系统"}},[t._v("指令系统")]),n("ul",[n("li",[n("a",{attrs:{href:"#初始化数据库"}},[t._v("初始化数据库")])])])]),n("li",[n("a",{attrs:{href:"#数据解析"}},[t._v("数据解析")]),n("ul",[n("li",[n("a",{attrs:{href:"#流程"}},[t._v("流程")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"server"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#server","aria-hidden":"true"}},[t._v("#")]),t._v(" server")]),t._v(" "),n("ul",[n("li",[t._v("配置数据地址  "),n("code",[t._v("src/configs/mysql.js")])])]),t._v(" "),n("h2",{attrs:{id:"redis"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#redis","aria-hidden":"true"}},[t._v("#")]),t._v(" redis")]),t._v(" "),n("ul",[n("li",[t._v("配置数据地址  "),n("code",[t._v("src/configs/redis.js")])])]),t._v(" "),n("h2",{attrs:{id:"数据存储"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据存储","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据存储")]),t._v(" "),n("h3",{attrs:{id:"表名说明"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#表名说明","aria-hidden":"true"}},[t._v("#")]),t._v(" 表名说明")]),t._v(" "),n("ul",[n("li",[t._v("所有表都以t_开头")]),t._v(" "),n("li",[t._v("原始表添加_o后缀，即t_o_")]),t._v(" "),n("li",[t._v("结果表添加-r后续，即t_r_")]),t._v(" "),n("li",[t._v("表名、字段名默认使用下划线方式命名，不区分大小写")]),t._v(" "),n("li",[t._v("数据库编码字符集为utf8mb4")]),t._v(" "),n("li",[t._v("记录ID用unsigned bigint")]),t._v(" "),n("li",[t._v("如果字段名有关键字，需要加_c前缀")]),t._v(" "),n("li",[t._v("所有表中必须有update_time 和create_time字段")])]),t._v(" "),n("h3",{attrs:{id:"数据库表"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据库表","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据库表")]),t._v(" "),n("ul",[n("li",[t._v("t_o_project 项目名")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\ndisplay_name "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目名称'")]),t._v("\t\nproject_name "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目代号(替代项目id, 方便debug)'")]),t._v("\t\nc_desc "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注信息'")]),t._v("\t\nrate "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'10000'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据抽样比率'")]),t._v("\t\nis_delete "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("tinyint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'是否已删除(1 => 是, 0 => 否)'")]),t._v("\t\ncreate_ucid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'创建人ucid'")]),t._v("\t\nupdate_ucid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'更新人ucid'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\n")])])]),n("ul",[n("li",[t._v("t_r_behavior_distribution")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段")]),t._v("\nid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'记录id'")]),t._v("\t\nproject_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\ncode "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户行为标识'")]),t._v("\t\nname "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户点击名称'")]),t._v("\t\nurl "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'用户点击页面'")]),t._v("\t\ntotal_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'点击总量'")]),t._v("\t\ncount_at_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计日期,格式根据统计尺度不同有三种可能, hour => YYYY-MM-DD_HH, day => YYYY-MM-DD, month => YYYY-MM'")]),t._v("\t\ncount_type "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'day'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计尺度(hour/day/month)'")]),t._v("\t\ncity_distribute_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'城市分布详情记录id'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\n")])])]),n("ul",[n("li",[t._v("t_r_duration_distribution 用户停留时间表")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段")]),t._v("\nid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'记录id'")]),t._v("\t\nproject_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\ntotal_stay_ms "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'总停留毫秒数'")]),t._v("\t\ntotal_uv "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'总uv数(从uv表中获取)'")]),t._v("\t\ncount_at_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计日期,格式根据统计尺度不同有两种可能, day => YYYY-MM-DD, month => YYYY-MM'")]),t._v("\t\ncount_type "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'day'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计尺度(day/month)'")]),t._v("\t\ncity_distribute_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'城市分布详情记录id'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\n")])])]),n("ul",[n("li",[t._v("t_r_http_error_distribution")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段")]),t._v("\nid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'记录id'")]),t._v("\t\nproject_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\ntotal_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http响应码总数'")]),t._v("\t\nhttp_code_2xx_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http响应码2xx总数'")]),t._v("\t\nhttp_code_3xx_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http响应码3xx总数'")]),t._v("\t\nhttp_code_4xx_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http响应码4xx总数'")]),t._v("\t\nhttp_code_5xx_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http响应码5xx总数'")]),t._v("\t\nhttp_code_other_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'其他http响应码总数'")]),t._v("\t\ncity_distribute_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'城市分布详情记录id'")]),t._v("\t\ncount_at_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计日期,格式根据统计尺度不同有三种可能, hour => YYYY-MM-DD_HH, day => YYYY-MM-DD, month => YYYY-MM'")]),t._v("\t\ncount_type "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hour'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计尺度(hour/day/month)'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\n")])])]),n("ul",[n("li",[t._v("t_r_page_view")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'记录id'")]),t._v("\t\nproject_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\ntotal_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'pv数'")]),t._v("\t\ncount_at_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("30")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计日期,格式根据统计尺度不同有三种可能, hour => YYYY-MM-DD_HH, day => YYYY-MM-DD, month => YYYY-MM'")]),t._v("\t\ncount_type "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'hour'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计尺度(hour/day/month)'")]),t._v("\t\ncity_distribute_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'城市分布记录id'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\n")])])]),n("ul",[n("li",[t._v("t_r_system_browser")])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 字段\t")]),t._v("\nid "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("AUTO_INCREMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'记录id'")]),t._v("\t\nproject_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'项目id'")]),t._v("\t\nbrowser "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'浏览器品牌'")]),t._v("\t\nbrowser_version "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("50")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'浏览器详情'")]),t._v("\t\ntotal_count "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("int")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" unsigned "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数量总和'")]),t._v("\t\ncount_at_month "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("varchar")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'统计时间段, YYYY-MM格式 => 2018-09'")]),t._v("\t\ncity_distribute_id "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'城市分布记录id'")]),t._v("\t\ncreate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库创建时间'")]),t._v("\t\nupdate_time "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("bigint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NOT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NULL")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DEFAULT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0'")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMENT")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'数据库更新时间'")]),t._v("\n")])])]),n("h2",{attrs:{id:"指令系统"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#指令系统","aria-hidden":"true"}},[t._v("#")]),t._v(" 指令系统")]),t._v(" "),n("ul",[n("li",[t._v("进入 server  执行 "),n("code",[t._v("npm run watch")]),t._v("进行编译(对src)")])]),t._v(" "),n("h3",{attrs:{id:"初始化数据库"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#初始化数据库","aria-hidden":"true"}},[t._v("#")]),t._v(" 初始化数据库")]),t._v(" "),n("ul",[n("li",[t._v("1、创建platform数据库")]),t._v(" "),n("li",[t._v("npm run watch")]),t._v(" "),n("li",[t._v("2、生成sql语句  用来建表\n"),n("ul",[n("li",[t._v("node dist/fee.js Utils:GenerateSQL 1 '2020-11' '2020-11' > init.sql")])])]),t._v(" "),n("li",[t._v("3、插入数据 这个数据要和前端sdk设置对应上\n"),n("ul",[n("li",[t._v("display_name和pid对应上")])])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//id, 抽样比率, 项目名(展示), 项目id, 负责人信息")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("REPLACE")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("INTO")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`t_o_project`")])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`id`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`rate`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`display_name`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`project_name`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`c_desc`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`is_delete`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`create_ucid`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`update_ucid`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`create_time`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`update_time`")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n   "),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("VALUES")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'示例项目'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'template'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'负责人'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("ul",[n("li",[n("p",[t._v("4、生成日志")])]),t._v(" "),n("li",[n("p",[t._v("他解析的是上一分钟的数据,有则解析,他会生成日志")])]),t._v(" "),n("li",[n("p",[t._v("node dist/fee.js SaveLog:Nginx")])]),t._v(" "),n("li",[n("p",[t._v("5、汇总日志nginx日志,写入数据库(下面时间对应上面生成日志的时间,时间不能错)")])]),t._v(" "),n("li",[n("p",[t._v("[按小时/按天/按月] 根据历史数据, 汇总分析记录指定时间范围内的性能指标数据")])]),t._v(" "),n("li",[n("p",[t._v("分钟(Parse 入库,Summary 汇总)")]),t._v(" "),n("ul",[n("li",[t._v('node dist/fee.js Parse:Performance "2020-11-5 11:26"  "2020-11-5 11:26"')])])]),t._v(" "),n("li",[n("p",[t._v("小时")]),t._v(" "),n("ul",[n("li",[t._v('node dist/fee.js Summary:Performance "2020-11-5 15"  hour')])])]),t._v(" "),n("li",[n("p",[t._v("天")]),t._v(" "),n("ul",[n("li",[t._v('node dist/fee.js Summary:Performance "2020-11-5"  day')])])]),t._v(" "),n("li",[n("p",[t._v("月")])]),t._v(" "),n("li",[n("p",[t._v("错误日志 汇总")])]),t._v(" "),n("li",[n("p",[t._v('node dist/fee.js Parse:Monitor "2020-11-5 18:31" "2020-11-5 18:31"')])]),t._v(" "),n("li",[n("p",[t._v("分")])]),t._v(" "),n("li",[n("p",[t._v('node dist/fee.js Summary:Error "2020-11-5 18:31" minute')])]),t._v(" "),n("li",[n("p",[t._v("时")])]),t._v(" "),n("li",[n("p",[t._v('node dist/fee.js Summary:Error "2020-11-5 18" hour')])]),t._v(" "),n("li",[n("p",[t._v("天")])]),t._v(" "),n("li",[n("p",[t._v('node dist/fee.js Summary:Error "2020-11-5" day')])]),t._v(" "),n("li",[n("p",[t._v("月")])]),t._v(" "),n("li",[n("p",[t._v('node dist/fee.js Summary:Error "2020-11" month')])])]),t._v(" "),n("h2",{attrs:{id:"数据解析"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据解析","aria-hidden":"true"}},[t._v("#")]),t._v(" 数据解析")]),t._v(" "),n("h3",{attrs:{id:"流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 流程")]),t._v(" "),n("ul",[n("li",[t._v("1、浏览器上传数据,nginx 保存到指令的地方")]),t._v(" "),n("li",[t._v("2、执行"),n("code",[t._v("node dist/fee.js SaveLog:Nginx")]),t._v(" 作用读取nginx下载的文件 (readLine 一行一行的读取),他会生成json和原生文件,保存到server/log目录下")]),t._v(" "),n("li",[t._v("3、执行"),n("code",[t._v('node dist/fee.js Parse:Performance "2020-11-5 11:26" "2020-11-5 11:26"')]),t._v("格式看下面,他会解析指定时间内的 文件,"),n("code",[t._v("base.js")]),t._v("里面的"),n("code",[t._v("execute")]),t._v("是文件的入口函数\n"),n("ul",[n("li",[n("code",[t._v("parseLog")]),t._v("解析文件")])])])]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token template-string"}},[n("span",{pre:!0,attrs:{class:"token string"}},[t._v("`\n  Parse:Performance \n  {startAtYmdHi:日志扫描范围上限")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE_FORMAT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMAND_ARGUMENT_BY_MINUTE")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("格式}\n  {endAtYmdHi:日志扫描范围下限")]),n("span",{pre:!0,attrs:{class:"token interpolation"}},[n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DATE_FORMAT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("COMMAND_ARGUMENT_BY_MINUTE")]),n("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("格式}\n`")])]),t._v("\n")])])])])}],!1,null,null,null);s.default=r.exports}}]);